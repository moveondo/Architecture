# Architecture


软件架构：

软件架构：一定形式的结构化元素，即构件的集合，包括：处理构件，数据构件，链接构件。

架构问题包括总体组织和全局控制，通信协议，同步，数据存取，给设计元素分配特定功能，设计元素的组织，规模和性能，在各设计方案间进行选择等。

架构作用：1）项目干系人进行交流的手段2）架构是早期设计决策的体现3）软件架构是可传递可重用的模型

软件架构建模：

1）结构模型：最直接最普遍的建模方法。以构架的构件，连接件和其他概念来刻画结构，并力图通过结构来反映系统的重要语义内容，包括系统配置，约束，隐含的假设条件，风格和性质等，研究结构模型的核心是架构描述语言。

2）框架模型：与结构模型类似，他不太侧重描述结构的细节更侧重整体结构。框架模型主要以一些特殊的问题位目标建立只针对和适应该问题的结构。

3）动态模型：对框架和结构模型的补充，研究系统大颗粒的问题。动态可以指系统总体结构的配置，建立或拆除通信通道或计算的过程。该类系统经常是激励型的。

4）过程模型：研究系统构造的步骤和过程，因而结构是遵循某些过程脚本的结果。

5）功能模型：构架事一组功能构件按层次组成，下层向上层提供服务，他可以看作是一种特殊的框架模型。

5种模型中最常用的是结构模型和动态模型。

4+1视图模型：逻辑视图，进程视图，物理视图，开发视图和场景视图

逻辑视图：最终用户：功能需求，类图描述，面向对象风格

开发视图：编程人员，软件管理

进程视图：系统集成人员，性能可扩充性和吞吐量等。侧重系统运行特性

物理视图：系统工程人员，系统拓扑，安装和通信等

场景视图：重要系统活动抽象，使4个视图有机联系起来

软件架构风格：

核心问题：能否使用重复的架构模式，即是否达到架构级别的软件重用

通用架构风格分类如下：

1）数据流风格：批处理序列，管道/过滤器

2）调用/返回风格：主程序/子程序，面向对象风格，层次风格

3）独立构件风格：进程通信，事件系统

4）虚拟机风格：解释器，基于规则的系统

5）仓库风格：数据库系统，超文本系统，黑板系统

几种经典的软件架构风格

1，管道/过滤器

数据流风格，每个构件都有一组输入和输出，构件读输入的数据流，经过内部处理，然后产生输出数据流。因此，这里的构件被称为过滤器，这种风格的连接件好像是数据流川叔的管道，将一个过滤器的输出传到另一个过滤器的输入。此风格比较重要的是过滤器必须是独立的实体。典型的例子：1）unix shell编写的程序2）传统的编译器

面向对象风格：

调用返回风格，建立在数据抽象和面向对象基础上，数据的表示方法和他们相应的操作封装在一个抽象数据类型或对象中。这种风格的构件是对象，或者说是抽象数据类型的实例。

3，基于事件的隐式调用：

思想是构件不能直接调用一个过程，而是触发或者广播一个活多个事件。系统中其他构件中的过程在一个活多个事件中注册，当一个事件呗触发，系统自动调用在这个事件中注册的所有过程，这样一个事件的触发就导致另一个模块中过程的调用。
主要特点是基于事件的隐式调用事件触发者并不知道哪些构件会被这些事件影响，这样不能假定构件的处理顺序，甚至不知道哪些过程呗调用，因为许多隐式调用的系统也包含显示调用作为构件交互的补充形式。

4，分层系统

 组织一个层次结构，每一层位上层服务，并作为下层的客户。在一些层次系统中除了一些精心挑选的输出函数外，内部的层只对相邻的层可见。这样的系统中构件在一些层实现了虚拟机，连接件通过决定层间如何交互的协议来定义。这种风格支持基于可增加抽象层的设计。这样允许将一个复炸问题分解为一个增量步骤序列的实现。由于每一层最多只影响两层，同时给相邻层提供相同的接口，允许每层用不同的方法实现，同样位软件重用提供了强大的支持。

最广泛的应用是分层通信协议

5，仓库系统及知识库

不同的构件：中央数据结构说明当前状态，独立构件在中央数据存储上执行。若数据流中某类时间触发进程执行的选择，则仓库是一传统型数据库；另一方面，若中央数据结构的当前状态触发进程执行的选择，则仓库是一黑板系统。

黑板系统传统应用就是信号处理领域。包含：1）知识源2）黑板数据结构3）控制

6，C2风格

通过连接件绑定在一起的按照一组规则运作的并行构件网络。规则位1）构件和链接件都有一个顶部和底部2）构件的顶部应该链接到某连接件的底部，构件的底部则应链接到某连接件的顶部，而构件和连接件的直接链接是不允许的3）一个链接脸可以和任意数目的其他构件和连接件连接4）当两个连接件进行直接链接时，必须有其中一个底部到另一个顶部。

客户端/服务器风格：

C/S架构可以是二层的，也可以是三层的。

二层C/S架构是基于资源不对等，且为实现共享而提出的，C/S定义了工作站如何与服务器相连，以实现数据和应用分布到多个处理机上。C/S架构有三个主要组成部分，分别是数据库服务器，客户应用程序和网络。

C/S架构将应用一分为二，服务器负责数据管理，客户端完成与用户的交互任务。

优点：系统的应用程序和服务器构件分别运行在不用的计算机上，系统中每台服务器都可以适合各构件的要求，这对于硬件和软件的变化显示出极大的适应性和灵活性，而且易于系统进行扩充和缩小。在C/S架构中，系统中的功能构件充分隔离，客户应用程序的开发集中于数据的显示和分析，而数据库服务器的开发则集中于数据的管理，不必在每一个新的应用程序中都要对一个DBMS进行编码。将大的应用处理任务分布到许多通过网络链接的低成本计算机上，以节约大量费用。

C/S架构具有强大的数据操作和事务处理能力，模型思想简单，易于人们理解和接受。随意企业规模的日益扩大，软件的复杂程度不断提高，C/S架构逐渐暴露出以下缺点：

1）开发成本较高。C/S架构对客户端软硬件配置要求较高，尤其是软件的不断升级，对硬件要求不断提高，增加了整个系统的成本，且客户端变得越来越臃肿

2）客户端程序设计复杂：C/S架构进行软件开发，大部分工作量放在客户端的程序设计上，客户端显得十分庞大

3）信息内容和形式单一：信息内容和形式单一，因为传统应用一般为事务处理，界面基本遵循数据库的字段解释，开发之初就已确定，用户获得的只是单纯的字符和数字，即枯燥又死板。

4）用户界面风格不统一，使用复杂，不利于推广使用。

5）软件移植困难。采用不同的开发工具或平台开发的软件，一般互不兼容，不能或很难移植到其他平台上运行

6）软件维护和升级困难。C/S架构软件需要升级的话开发人员必须到现场为客户端升级，每个客户端上的软件都需要维护。对软件的一个小小的改动，每一个客户端都必须更新。

7）新技术不能轻易使用，以为一个软件平台和开发工具一旦选定，不可能轻易更改。


多层架构风格：

二层C/S架构师单一服务器且已局域网为中心，所以难以扩展到大型企业广域网或internet，软硬件组合及集成能力有限。客户端负荷太重，难以管理大量的客户机，系统性能容易变坏。另外因为客户端程序可以直接访问数据库服务器，那么在客户端计算上的其他程序可想办法访问数据库服务器，从而使数据库的安全性收到威胁。

1，三层C/S架构模型：

增加一个应用服务器，可以将整个应用逻辑驻留在应用服务器上，而只有表示层存在于客户端上，这种结构被称为瘦客户端。三层C/S将应用功能分为表示层，功能层，数据层三部分。

表示层：应用的用户接口部分，担负着用户与应用间的对话功能（键盘输入，图形用户界面）

功能层：应用的本体，将具体的业务处理逻辑编入程序中。

数据层：DBMS，负责管理对数据库数据的读写

三层C/S解决方案：对三层进行明确分割，并在逻辑上使其独立。原来的数据层作为DBMS已经独立出来，所以关键是将表示层和功能层分离各自独立的程序，并且还要使这两层间的接口简洁明了。

优点：

1）允许合理划分三层结构功能，使之在逻辑上保持相对独立性，从而使整个系统逻辑上结构更为清晰，能提高系统和软件的可维护性和可扩展性

2）允许更灵活的有效选用相应的平台和硬件系统。

3）三层C/S中应用的各层可以并行开发，各层也可选择最适合的开发语言。

4）允许充分利用功能层有效隔离开表示层和数据层，未授权的用户难以绕过功能层利用数据库工具或者黑客手段去非法访问数据层，这就为严格的安全管理奠定了坚实的基础。整个系统的管理层也更加合理和可控。

设计时必须慎重考虑三层间的通信方法，通信频度及数据量，与提高独立性一样是三层C/S关键问题

B/S架构

三层C/S架构中，表示层负责处理用户的输入和向客户的输出；功能层负责建立数据的链接，根据用户的请求生成访问数据的SQL语句，并将结果返回给客户端；数据层负责市级的数据库存储和检索，相应功能层的数据处理请求，并将结果返回给功能层。

Browser/Server风格就是上述三层应用结构的一种实现方式，具体结构为浏览器/web服务器/数据库服务器。B/S架构主要是利用不断成熟的www浏览器技术，结合浏览器的多种脚本语言，用通用浏览器实现了原来需要复杂的专用软件才能实现的强大功能，并节约了开发成本。

在B/S架构中，除了数据库服务器外，应用程序以网页形式存于web服务器上，用户运行某个应用程序时只需在客户端上的浏览器中输入相应的网址，调用web服务器上的应用程序并对数据库进行操作完成相应的数据处理工作，最后将结果通过浏览器显示给用户。

B/S架构软件，系统的安装维修和维护全在服务器端解决。用户在使用系统时基金需要一个浏览器就可以运行全部的模块，真正达到了零客户端的功能，很容易在运行时自动升级。B/S架构还提供了异中机，异种网，异种应用服务的联机，联网，统一服务的最现实的开放性基础。

与C/S架构比，B/S架构不足：

1）B/S架构缺乏对动态页面的支持能力，没有集成有效的数据库处理功能

2）扩展能力差，安全性难以控制

3）在数据查询等响应速度上，要远远低于C/S架构

4）数据提交一般以页面为单位，数据的动态交互性不强，不利于OLTP应用

正交软件架构：

由组织层和线索的构件构成，层是由一组具有相同抽象级别的构件构成，线索是子系统的特例，它是由完成不同层次功能的构件组成，每一条线索完成整个系统中相对独立的一部分功能。每一条线索的实现和其他实现无关或者关联很少，在同一层次中的构件之间不存在相互调用
如果线索是相互独立的，不同的线索构件之间没有相互调用，这个结构就是完全正交







